<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>CF-DDNS UI</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 1em auto; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 1em; }
        th, td { border: 1px solid #ccc; padding: 0.5em; text-align: left; }
        fieldset { margin-bottom: 1em; }
        .error { color: red; } .success { color: green; }
    </style>
</head>
<body>
<h1>CF-DDNS Dashboard</h1>

{% for cat,msg in get_flashed_messages(with_categories=true) %}
<p class="{{cat}}">{{msg}}</p>
{% endfor %}

<h2>Current DNS Records (Zone ID: {{zone}})</h2>
{% if records %}
<table>
    <thead><tr>
        <th>Name</th><th>Type</th><th>Content (IP)</th><th>Proxied</th>
    </tr></thead>
    <tbody>
    {% for r in records %}
    <tr>
        <td>{{r.name}}</td>
        <td>{{r.type}}</td>
        <td>{{r.content}}</td>
        <td>{{ '✔' if r.proxied else '✘' }}</td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<p><em>No A/AAAA records found for this zone.</em></p>
{% endif %}

<h2>Configured Subdomains</h2>
{% if subs %}
<ul>
    {% for s in subs %}
    <li>{{s.name}} &nbsp;[proxied: {{ 'yes' if s.proxied else 'no' }}]</li>
    {% endfor %}
</ul>
{% else %}
<p><em>No subdomains configured yet.</em></p>
{% endif %}

<fieldset>
    <legend>Add a New Subdomain</legend>
    <form action="{{ url_for('add_subdomain') }}" method="post">
        <label>
            Subdomain name (e.g. “foo” for foo.YOURDOMAIN.com):
            <input name="new_subdomain" required>
        </label>
        <button type="submit">➕ Add</button>
    </form>
</fieldset>

<p>
    <a href="/update">🔄 Run Update Now</a>
</p>
</body>
</html>